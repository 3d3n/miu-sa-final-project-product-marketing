2021-10-20 20:59:48,205 INFO org.springframework.boot.StartupInfoLogger [main] Starting AccountServiceApplicationTests using Java 16.0.2 on kevins-MacBook-Pro.local with PID 5184 (started by kevinlarry in /Users/kevinlarry/Downloads/miu-sa-final-project-product-marketing/account-service)
2021-10-20 20:59:48,209 DEBUG org.springframework.boot.StartupInfoLogger [main] Running with Spring Boot v2.5.5, Spring v5.3.10
2021-10-20 20:59:48,211 INFO org.springframework.boot.SpringApplication [main] No active profile set, falling back to default profiles: default
2021-10-20 20:59:50,093 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Multiple Spring Data modules found, entering strict repository configuration mode!
2021-10-20 20:59:50,097 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2021-10-20 20:59:50,442 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 338 ms. Found 2 MongoDB repository interfaces.
2021-10-20 20:59:50,491 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Multiple Spring Data modules found, entering strict repository configuration mode!
2021-10-20 20:59:50,496 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2021-10-20 20:59:50,537 INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport [main] Spring Data Redis - Could not safely identify store assignment for repository candidate interface miu.sa.accountservice.repository.AffiliateRepository. If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository.
2021-10-20 20:59:50,544 INFO org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport [main] Spring Data Redis - Could not safely identify store assignment for repository candidate interface miu.sa.accountservice.repository.CustomerRepository. If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository.
2021-10-20 20:59:50,546 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 33 ms. Found 0 Redis repository interfaces.
2021-10-20 20:59:51,135 INFO org.springframework.cloud.context.scope.GenericScope [main] BeanFactory id=16767e3b-ba0f-3578-996e-e35aa2e7b5a9
2021-10-20 20:59:53,062 WARN org.springframework.cloud.sleuth.autoconfig.zipkin2.ZipkinAutoConfiguration [main] Check result of the [RestTemplateSender{http://localhost:9411/api/v2/spans}] contains an error [CheckResult{ok=false, error=org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:9411/api/v2/spans": Connection refused; nested exception is java.net.ConnectException: Connection refused}]
2021-10-20 20:59:53,270 INFO com.mongodb.diagnostics.logging.SLF4JLogger [main] Cluster created with settings {hosts=[localhost:27017], mode=SINGLE, requiredClusterType=UNKNOWN, serverSelectionTimeout='2000 ms'}
2021-10-20 20:59:53,467 INFO com.mongodb.diagnostics.logging.SLF4JLogger [cluster-rtt-ClusterId{value='6170c999b38ea76766cd1efe', description='null'}-localhost:27017] Opened connection [connectionId{localValue:2, serverValue:11}] to localhost:27017
2021-10-20 20:59:53,467 INFO com.mongodb.diagnostics.logging.SLF4JLogger [cluster-ClusterId{value='6170c999b38ea76766cd1efe', description='null'}-localhost:27017] Opened connection [connectionId{localValue:1, serverValue:12}] to localhost:27017
2021-10-20 20:59:53,468 INFO com.mongodb.diagnostics.logging.SLF4JLogger [cluster-ClusterId{value='6170c999b38ea76766cd1efe', description='null'}-localhost:27017] Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=13, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=90615395}
2021-10-20 20:59:53,534 WARN org.springframework.data.convert.CustomConversions [main] Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2021-10-20 20:59:53,751 WARN org.springframework.data.convert.CustomConversions [main] Registering converter from class java.time.LocalDateTime to class org.joda.time.LocalDateTime as reading converter although it doesn't convert from a store-supported type! You might want to check your annotation setup at the converter implementation.
2021-10-20 20:59:57,326 INFO org.springframework.cloud.netflix.eureka.config.DiscoveryClientOptionalArgsConfiguration [main] Eureka HTTP Client uses RestTemplate.
2021-10-20 20:59:57,665 WARN org.springframework.cloud.loadbalancer.config.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger [main] Spring Cloud LoadBalancer is currently working with the default cache. You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2021-10-20 20:59:57,942 INFO org.springframework.boot.StartupInfoLogger [main] Started AccountServiceApplicationTests in 15.702 seconds (JVM running for 18.482)
2021-10-20 20:59:58,048 INFO com.mongodb.diagnostics.logging.SLF4JLogger [main] Opened connection [connectionId{localValue:3, serverValue:13}] to localhost:27017
2021-10-20 20:59:58,302 INFO miu.sa.accountservice.config.DatabaseInitializer [main] Database preloading...
2021-10-20 20:59:58,376 INFO miu.sa.accountservice.service.CustomerService [main] save Request => Customer(id=null, firstName=Ada, lastName=Lovelace, email=ada.lovelace@miu.sa, password=ada, role=CUSTOMER, isActive=true, addresses=[Address(street=1000 N 4th st, zip=52557, city=Fairfield, state=IA, isDefault=true), Address(street=1000 N 4th st, zip=52557, city=Fairfield, state=IA, isDefault=false)], payments=[PaymentMethod(type=CC, metaData=CreditCardPayment(cardNumber=1234, nameOnCard=ada lovelace, expDate=04/24), isDefault=true)])
2021-10-20 20:59:58,550 INFO miu.sa.accountservice.service.CustomerService [main] save Response => ResponseModel(message=Customer created, success=true, data=AccountDto(id=df77f12e-d3c0-410d-8ded-af8cad30f491, email=ada.lovelace@miu.sa, firstName=Ada, lastName=Lovelace, role=CUSTOMER, isActive=true, addresses=[Address(street=1000 N 4th st, zip=52557, city=Fairfield, state=IA, isDefault=true), Address(street=1000 N 4th st, zip=52557, city=Fairfield, state=IA, isDefault=false)], payments=[PaymentMethod(type=CC, metaData=CreditCardPayment(cardNumber=1234, nameOnCard=ada lovelace, expDate=04/24), isDefault=true)]))
2021-10-20 20:59:58,552 INFO miu.sa.accountservice.service.CustomerService [main] save Request => Customer(id=null, firstName=Alan, lastName=Turing, email=alan.turing@miu.sa, password=alan, role=CUSTOMER, isActive=true, addresses=[Address(street=1000 N 4th st, zip=52557, city=Fairfield, state=IA, isDefault=true), Address(street=1000 N 4th st, zip=52557, city=Fairfield, state=IA, isDefault=false)], payments=[PaymentMethod(type=CC, metaData=CreditCardPayment(cardNumber=54678, nameOnCard=alan turing, expDate=07/22), isDefault=true)])
2021-10-20 20:59:58,559 INFO miu.sa.accountservice.service.CustomerService [main] save Response => ResponseModel(message=Customer created, success=true, data=AccountDto(id=3b0172c3-c815-443f-9b37-c5dec0ffaf3a, email=alan.turing@miu.sa, firstName=Alan, lastName=Turing, role=CUSTOMER, isActive=true, addresses=[Address(street=1000 N 4th st, zip=52557, city=Fairfield, state=IA, isDefault=true), Address(street=1000 N 4th st, zip=52557, city=Fairfield, state=IA, isDefault=false)], payments=[PaymentMethod(type=CC, metaData=CreditCardPayment(cardNumber=54678, nameOnCard=alan turing, expDate=07/22), isDefault=true)]))
2021-10-20 20:59:58,561 INFO miu.sa.accountservice.service.CustomerService [main] save Request => Customer(id=null, firstName=Dennis, lastName=Ritchie, email=dennis.ritchie@miu.sa, password=dennis, role=CUSTOMER, isActive=true, addresses=[Address(street=1000 N 4th st, zip=52557, city=Fairfield, state=IA, isDefault=true), Address(street=1000 N 4th st, zip=52557, city=Fairfield, state=IA, isDefault=false)], payments=[PaymentMethod(type=BANK, metaData=BankPayment(accountNo=9012345, routingNo=098765, accountName=dennis ritchie), isDefault=true)])
2021-10-20 20:59:58,569 INFO miu.sa.accountservice.service.CustomerService [main] save Response => ResponseModel(message=Customer created, success=true, data=AccountDto(id=d2a18711-3cf1-4bbd-9026-a052a8761cb1, email=dennis.ritchie@miu.sa, firstName=Dennis, lastName=Ritchie, role=CUSTOMER, isActive=true, addresses=[Address(street=1000 N 4th st, zip=52557, city=Fairfield, state=IA, isDefault=true), Address(street=1000 N 4th st, zip=52557, city=Fairfield, state=IA, isDefault=false)], payments=[PaymentMethod(type=BANK, metaData=BankPayment(accountNo=9012345, routingNo=098765, accountName=dennis ritchie), isDefault=true)]))
2021-10-20 20:59:58,602 INFO miu.sa.accountservice.service.AffiliateService [main] save Request => Affiliate(id=null, firstName=Patricia, lastName=Lebsack, email=patricia.lebsack@miu.sa, password=patricia, role=AFFILIATE, isActive=true, addresses=[Address(street=Kulas Light, zip=92998-3874, city=Gwenborough, state=IA, isDefault=true), Address(street=Victor Plains, zip=90566-7771, city=Wisokyburgh, state=IA, isDefault=false)], payments=[PaymentMethod(type=CC, metaData=CreditCardPayment(cardNumber=1234, nameOnCard=Patricia Lebsack, expDate=04/24), isDefault=true)])
2021-10-20 20:59:58,664 INFO miu.sa.accountservice.service.AffiliateService [main] save Response => ResponseModel(message=Affiliate created, success=true, data=AccountDto(id=8e674e22-d1e6-402a-9da1-ecd79c800666, email=patricia.lebsack@miu.sa, firstName=Patricia, lastName=Lebsack, role=AFFILIATE, isActive=true, addresses=[Address(street=Kulas Light, zip=92998-3874, city=Gwenborough, state=IA, isDefault=true), Address(street=Victor Plains, zip=90566-7771, city=Wisokyburgh, state=IA, isDefault=false)], payments=[PaymentMethod(type=CC, metaData=CreditCardPayment(cardNumber=1234, nameOnCard=Patricia Lebsack, expDate=04/24), isDefault=true)]))
2021-10-20 20:59:58,664 INFO miu.sa.accountservice.service.AffiliateService [main] save Request => Affiliate(id=null, firstName=Clementine, lastName=Bauch, email=clementine.bauch@miu.sa, password=clementine, role=AFFILIATE, isActive=true, addresses=[Address(street=Douglas Extension, zip=59590-4157, city=McKenziehaven, state=IA, isDefault=true)], payments=[PaymentMethod(type=CC, metaData=CreditCardPayment(cardNumber=54678, nameOnCard=Clementine Bauch, expDate=07/22), isDefault=true)])
2021-10-20 20:59:58,672 INFO miu.sa.accountservice.service.AffiliateService [main] save Response => ResponseModel(message=Affiliate created, success=true, data=AccountDto(id=4544b8e8-3454-4916-bf6a-5c8d6850515b, email=clementine.bauch@miu.sa, firstName=Clementine, lastName=Bauch, role=AFFILIATE, isActive=true, addresses=[Address(street=Douglas Extension, zip=59590-4157, city=McKenziehaven, state=IA, isDefault=true)], payments=[PaymentMethod(type=CC, metaData=CreditCardPayment(cardNumber=54678, nameOnCard=Clementine Bauch, expDate=07/22), isDefault=true)]))
2021-10-20 20:59:58,674 INFO miu.sa.accountservice.service.AffiliateService [main] save Request => Affiliate(id=null, firstName=Ervin, lastName=Howell, email=ervin.howell@miu.sa, password=ervin, role=AFFILIATE, isActive=true, addresses=[Address(street=Hoeger Mall, zip=53919-4257, city=South Elvis, state=IA, isDefault=true)], payments=[PaymentMethod(type=BANK, metaData=BankPayment(accountNo=9012345, routingNo=098765, accountName=Ervin Howell), isDefault=true)])
2021-10-20 20:59:58,688 INFO miu.sa.accountservice.service.AffiliateService [main] save Response => ResponseModel(message=Affiliate created, success=true, data=AccountDto(id=907cbd46-8a37-4ac1-97b3-b121dcabbb5a, email=ervin.howell@miu.sa, firstName=Ervin, lastName=Howell, role=AFFILIATE, isActive=true, addresses=[Address(street=Hoeger Mall, zip=53919-4257, city=South Elvis, state=IA, isDefault=true)], payments=[PaymentMethod(type=BANK, metaData=BankPayment(accountNo=9012345, routingNo=098765, accountName=Ervin Howell), isDefault=true)]))
2021-10-20 20:59:58,692 INFO miu.sa.accountservice.config.DatabaseInitializer [main] Database preloaded::::
2021-10-20 20:59:59,198 WARN zipkin2.reporter.AsyncReporter$BoundedAsyncReporter [AsyncReporter{RestTemplateSender{http://localhost:9411/api/v2/spans}}] Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2021-10-20 20:59:59,202 WARN zipkin2.reporter.AsyncReporter$BoundedAsyncReporter [AsyncReporter{RestTemplateSender{http://localhost:9411/api/v2/spans}}] Dropped 9 spans due to ResourceAccessException(I/O error on POST request for "http://localhost:9411/api/v2/spans": Connection refused; nested exception is java.net.ConnectException: Connection refused)
org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:9411/api/v2/spans": Connection refused; nested exception is java.net.ConnectException: Connection refused
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:785)
	at org.springframework.cloud.sleuth.zipkin2.ZipkinRestTemplateWrapper.doExecute(ZipkinRestTemplateWrapper.java:69)
	at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:660)
	at org.springframework.cloud.sleuth.zipkin2.RestTemplateSender.post(RestTemplateSender.java:151)
	at org.springframework.cloud.sleuth.zipkin2.RestTemplateSender$HttpPostCall.doExecute(RestTemplateSender.java:169)
	at org.springframework.cloud.sleuth.zipkin2.RestTemplateSender$HttpPostCall.doExecute(RestTemplateSender.java:159)
	at zipkin2.Call$Base.execute(Call.java:391)
	at zipkin2.reporter.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:299)
	at zipkin2.reporter.AsyncReporter$Flusher.run(AsyncReporter.java:378)
	at java.base/java.lang.Thread.run(Thread.java:831)
Caused by: java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:669)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:549)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:597)
	at java.base/java.net.Socket.connect(Socket.java:645)
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:177)
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:497)
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:600)
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:351)
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:372)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1299)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1232)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1120)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1051)
	at org.springframework.http.client.SimpleBufferingClientHttpRequest.executeInternal(SimpleBufferingClientHttpRequest.java:76)
	at org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48)
	at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:66)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:776)
	... 9 common frames omitted
2021-10-20 21:00:00,923 INFO com.mongodb.diagnostics.logging.SLF4JLogger [SpringApplicationShutdownHook] Closed connection [connectionId{localValue:3, serverValue:13}] to localhost:27017 because the pool has been closed.
